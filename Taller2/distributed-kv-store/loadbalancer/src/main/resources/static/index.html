<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Load Balancer Dashboard</title>
  <style>
    body { font-family: Arial; margin: 40px; }
    table { border-collapse: collapse; width: 60%; }
    th, td { border: 1px solid #ccc; padding: 5px 10px; text-align: left; }
  </style>
</head>
<body>
  <h1>Dashboard Load Balancer</h1>
  <table>
    <thead>
      <tr><th>Backend URL</th><th>Status</th></tr>
    </thead>
    <tbody id="backends"></tbody>
  </table>

  <script>
    async function loadBackends() {
      try {
        const res = await fetch("/nodes");
        const data = await res.json();
        const tbody = document.getElementById("backends");
        tbody.innerHTML = "";

        for (const backend of data) {
          const tr = document.createElement("tr");
          const urlTd = document.createElement("td");
          urlTd.textContent = backend.url;

          const statusTd = document.createElement("td");
          statusTd.textContent = backend.alive ? "ðŸŸ¢ Alive" : "ðŸ”´ Down";

          tr.appendChild(urlTd);
          tr.appendChild(statusTd);
          tbody.appendChild(tr);
        }
      } catch (err) {
        console.error(err);
      }
    }

    loadBackends();
    setInterval(loadBackends, 5000); // refresca cada 5s
  </script>
</body>
</html>
